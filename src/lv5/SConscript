import sys
from os.path import join, dirname, abspath
Import('context object_files root_dir')

def Build():
  conf = Configure(context.Clone())
  if conf.CheckLib('boost_thread'):
    conf.env.Append(
        LIBS='boost_thread')
  env = conf.Finish()
  env.Append(
      LIBS=['gc'],
      CCFLAGS=["-fno-strict-aliasing"],
      )
  return env.Program('lv5',
      [Glob('*.cc'), Glob('*.c'), object_files])

program = Build()
Return('program')
